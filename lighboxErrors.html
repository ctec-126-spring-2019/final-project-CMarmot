<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="lightbox/css/bootstrap.min.css">

    <link rel="stylesheet" href="finalForm.css">
    <title>Lightbox with Error Checking</title>
</head>

<h1 class="middle">Game of Groans!!</h1>
<div class="errors"></div>

<form id="data" action="http://ctec.clark.edu/~belgort/formprocessing/processform.php" method="post">

    <div class="container">

        <div id="question1"></div>

        <div id="question2"></div>

        <div id="question3"></div>

        <div id="question4"></div>

    </div>
    <!-- First Question -->
    <div id="q1" class="question">

        <label class="quest" for="chili">Who is the bassist for the Red Hot Chili Peppers?
            <br>
        </label>
        <select name="chili" id="chili">
            <option value="lee" id="lee">Geddy Lee</option>
            <option value="flea" id="flea">Flea</option>
            <option value="entwhistle" id="entwhistle">John Entwhistle</option>
            <option value="jones" id="jones">John Paul Jones</option>
            <option value="ringo" id="ringo">Ringo Starr</option>
        </select>

        <br><br>
    </div>
    <!-- First Question -->
    <div id="q2" class="question">

        <label class="quest" for="blues">Who was not in the Blues Brothers movie?
            <br>

        </label>
        <select name="blues" id="blues">
            <option value="cab" id="cab">Cab Calloway</option>
            <option value="aretha" id="aretha">Aretha Franklin</option>
            <option value="carrie" id="carrie">Carrie Fisher</option>
            <option value="ray" id="ray">Ray Charles</option>
            <option value="bruce" id="bruce">Bruce Elgort</option>
        </select>

        <br><br>
    </div>

    <div id="q3" class="question">

        <label class="quest" for="moody">What classical group played on the Moody Blues album "Days of Future Passed"?
            <br><br>
        </label>

        <select name="moody" id="moody">
            <option value="chorale" id="chorale">The London Chorale</option>
            <option value="orchestra" id="orchestra">The London Symphony Orchestra</option>
            <option value="symphony" id="symphony">The London Symphony</option>
            <option value="festival" id="festival">The London Festival Orchestra</option>
            <option value="kazoo" id="kazoo">The London Kazoo Orchestra</option>
        </select>

        <br><br>
    </div>

    <div id="q4" class="question">

        <label class="quest" for="green">What Green Day album was made into an award-winning Broadway show?
            <br>

        </label>

        <select name="green" id="green">
            <option value="idiot" id="idiot">American Idiot</option>
            <option value="century" id="century">21st Century Breakdown</option>
            <option value="dookie" id="dookie">Dookie</option>
            <option value="dreams" id="dreams">Boulevard of Broken Dreams</option>
            <option value="men" id="men">Eyeliner is for Men</option>
        </select>

        <br><br>
    </div>

    <input type="submit" value="Submit">
    <div class="row">
        <div class="col-lg-12">
            <footer class="text-center pt-5">
                <button type="button" id="stopper" class="btn btn-primary text-center pt-5">Stop the madness!</button>

            </footer>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <footer class="text-center pt-5">
                <button type="button" id="starter1" class="btn btn-primary text-center pt-5">Start the madness!</button>

            </footer>
        </div>
    </div>


</form>

<div class="errors"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>
    // checks for document fully loaded
    $(document).ready(function () {
        // binds submit button to this event
        $('#data').on('submit', function (evt) {
            console.log(evt);
            // empty array to hold errors
            var errors = [];
            // used for error checking
            var flag = true;
            // question one error handling
            if ($('#chili').val() !== 'flea') {
                $('#chili').css('border', '3px solid red');
                $('#err1').remove();
                flag = true;
                $('#chili').after('<span id="err1"> Incorrect </span>');
                // $('#firstname').focus();

                // pushes error array onto errors
                errors.push(['chili', 'Incorrect']);
            }
            else {

                $('#err1').remove();
                flag = true;
                $('#chili').css('color', 'purple');
                // q1.innerHTML = "argh so close";
                displayQuestion1();
                function displayQuestion1() {


                    // Create a variable named 'featuredStudent' that is a handle to the element with the ID of 'featuredStudentPanel'
                    var featuredStudent = document.getElementById('question1');

                    // This is the arrays for featuredStudents. Note that you are to use. Note that it is an array of arrays.
                    var featuredStudents = [
                        ['Moody Blues'],
                        ['John Bonham'],
                        ['Dave Matthews'],
                        ['Alice Cooper']
                    ];


                    var random = Math.floor(Math.random() * featuredStudents.length);

                    var randomStudent = ['img/redCalif.jpg', 'img/redGetaway.jpg', 'img/redLive.jpg', 'img/redStadium.jpg'];

                    q1.innerHTML = "<img class='studentpic' src=" + randomStudent[random] + ">";
                }
            }

            //     <button onclick="changeColor('blue');">blue</button>
            // function changeColor(newcolor) {
            // var chiliAlbum = document.getElementById ('q1');
            // chiliAlbum.style.color = 'blue';}



            // question two error handling
            if ($('#blues').val() !== 'bruce') {
                $('#blues').css('border', '3px solid red');
                $('#err2').remove();
                flag = true;
                $('#blues').after('<span id="err2"> Incorrect</span>');

                errors.push(['blues', 'Incorrect']);
            } else {
                $('#err2').remove();
                $('#blues').css('border', '3px solid black');
                displayQuestion2();
                function displayQuestion2() {



                    var featuredStudent = document.getElementById('question2');

                    var featuredStudents = [
                        ['Moody Blues'],
                        ['John Bonham'],
                        ['Dave Matthews'],
                        ['Alice Cooper']
                    ];

                    var random = Math.floor(Math.random() * featuredStudents.length);

                    var randomStudent = ['img/bluesAmerica.jpg', 'img/bluesDefinitive.jpg', 'img/bluesSoul.jpg', 'img/bluesSoundtrack.jpg'];

                    q2.innerHTML = "<img class='studentpic' src=" + randomStudent[random] + ">";
                }
            }

            // question three error handling
            if ($('#moody').val() !== 'festival') {
                $('#moody').css('border', '3px solid red');
                $('#err3').remove();
                flag = true;
                $('#moody').after('<span id="err2"> Incorrect</span>');

                errors.push(['moody', 'Incorrect']);
            } else {
                $('#err3').remove();
                // Switch to lightbox when question is correct Q3
                displayQuestion3();
function displayQuestion3() {
    

    var featuredStudent = document.getElementById('question3');

  
    var featuredStudents = [
        ['Moody Blues'],
        ['John Bonham'  ],
        ['Dave Matthews'],
        ['Alice Cooper']
    ];
    
    var random = Math.floor(Math.random() * featuredStudents.length);

    var randomStudent = ['img/moodyDays.jpg', 'img/moodyChord.jpg', 'img/moodyEvery.jpg', 'img/moodyBalance.jpg'];

    q3.innerHTML = "<img class='studentpic' src=" + randomStudent[random] + ">";
}

            }
            // question four error handling
            if ($('#green').val() !== 'idiot') {
                $('#green').css('border', '3px solid red');
                $('#err4').remove();
                flag = true;
                $('#green').after('<span id="err2"> Incorrect</span>');

                errors.push(['green', 'Incorrect']);
            } else {
                $('#err4').remove();
                displayQuestion4();
                function displayQuestion4() {
 
 var featuredStudent = document.getElementById('question4');

 var featuredStudents = [
     ['Moody Blues'],
     ['John Bonham'  ],
     ['Dave Matthews'],
     ['Alice Cooper']
 ];

 var random = Math.floor(Math.random() * featuredStudents.length);

 var randomStudent = ['img/green21st.jpg', 'img/greenDookie.jpg', 'img/greenIdiot.jpg', 'img/greenNimrod.jpg'];

 q4.innerHTML = "<img class='studentpic' src=" + randomStudent[random] + ">";
}
            }


            // error bucket and form submission prevent
            flag = true;
            if (flag) {
                // console.log (yes);
                var errorBucket = $('.errors');
                var output = '<ul>';
                for (let index = 0; index < errors.length; index++) {
                    output += '<li>' + errors[index][1] + '</li>';
                }
                output += '</ul>';
                errorBucket.html(output);
                // stops form from being submitted
                evt.preventDefault();
                // puts the currsor in first unfilled input
                $('#' + errors[0][0]).focus();
            }




        });
    });
    stopper.addEventListener("click", function () {
        stopIntervals(featuredStudentTimer1);
        stopIntervals(featuredStudentTimer2);
        stopIntervals(featuredStudentTimer3);
        stopIntervals(featuredStudentTimer4);
    });

    // This is the placeholder for the start of the lightbox functionality that will be called when user gets question right
    starter1.addEventListener("click", function () {
        featuredStudentTimer1 = setInterval(displayQuestion1, 1000);

    });
    starter2.addEventListener("click", function () {
        featuredStudentTimer2 = setInterval(displayQuestion1, 1000);

    });
    starter3.addEventListener("click", function () {
        featuredStudentTimer3 = setInterval(displayQuestion1, 1000);

    });
    starter4.addEventListener("click", function () {
        featuredStudentTimer4 = setInterval(displayQuestion1, 1000);

    });



</script>
<script src="lightboxScript.js"></script>
</body>

</html>