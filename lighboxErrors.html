<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="lightbox/css/bootstrap.min.css">

    <link rel="stylesheet" href="finalForm.css">
    <title>Lightbox with Error Checking</title>
</head>

<h1 class="middle">Game of Groans!!</h1>
<!-- <div class="errors"></div> -->

<form id="data" action="http://ctec.clark.edu/~belgort/formprocessing/processform.php" method="post">

    <div class="container">

        <div id="question1"></div>

        <div id="question2"></div>

        <div id="question3"></div>

        <div id="question4"></div>

    </div>
    <!-- First Question -->
    <div id="q1" class="question">

        <label class="quest" for="chili">Who is the bassist for the Red Hot Chili Peppers?
        <br><br>
        </label>

        <select name="chili" id="chili">
            <option value="lee" id="lee">Geddy Lee</option>
            <option value="flea" id="flea">Flea</option>
            <option value="entwhistle" id="entwhistle">John Entwhistle</option>
            <option value="jones" id="jones">John Paul Jones</option>
            <option value="ringo" id="ringo">Ringo Starr</option>
        </select>

        <br><br>
    </div>

    <!-- Second Question -->
    <div id="q2" class="question">

        <label class="quest" for="blues">Who was not in the Blues Brothers movie?
        <br><br>
        </label>

        <select name="blues" id="blues">
            <option value="cab" id="cab">Cab Calloway</option>
            <option value="aretha" id="aretha">Aretha Franklin</option>
            <option value="carrie" id="carrie">Carrie Fisher</option>
            <option value="ray" id="ray">Ray Charles</option>
            <option value="bruce" id="bruce">Bruce Elgort</option>
        </select>

        <br><br>
    </div>

   <!-- Third Question -->
    <div id="q3" class="question">

        <label class="quest" for="moody">What classical group played on the Moody Blues album "Days of Future Passed"?
        <br><br>
        </label>

        <select name="moody" id="moody">
            <option value="chorale" id="chorale">The London Chorale</option>
            <option value="orchestra" id="orchestra">The London Symphony Orchestra</option>
            <option value="symphony" id="symphony">The London Symphony</option>
            <option value="festival" id="festival">The London Festival Orchestra</option>
            <option value="kazoo" id="kazoo">The London Kazoo Orchestra</option>
        </select>

        <br><br>
    </div>

    <!-- Fourth Question -->
    <div id="q4" class="question">

        <label class="quest" for="green">What Green Day album was made into an award-winning Broadway show?
        <br><br>
        </label>

        <select name="green" id="green">
            <option value="idiot" id="idiot">American Idiot</option>
            <option value="century" id="century">21st Century Breakdown</option>
            <option value="dookie" id="dookie">Dookie</option>
            <option value="dreams" id="dreams">Boulevard of Broken Dreams</option>
            <option value="men" id="men">Eyeliner is for Men</option>
        </select>

        <br><br>
    </div>

   
    <div class="row">
        <div class="col-md-12">
            <footer class="text-center">
                    <input type="submit" class="btn btn-primary text-center" value="Submit">
            </footer>
        
        </div>
    </div>


</form>

<!-- <div class="errors"></div> -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>
    // checks for document fully loaded
    $(document).ready(function () {
        // binds submit button to this event
        $('#data').on('submit', function (evt) {
            console.log(evt);
            // empty array to hold errors
            var errors = [];
            // used for error checking
            var flag = true;
            // question one error handling
            if ($('#chili').val() !== 'flea') {
                $('#chili').css('border', '3px solid red');
                $('#err1').remove();
                flag = true;
                $('#chili').after('<span id="err1"> Incorrect </span>');
                // $('#firstname').focus();

           
            }
            else {
// correct
                $('#err1').remove();
                flag = true;
                $('#chili').css('color', 'purple');
                // q1.innerHTML = "argh so close";
                displayQuestion1();
                function displayQuestion1() {
                   
                    var featuredStudent = document.getElementById('question1');
                    var featuredStudents = [
                        ['Moody Blues'],
                        ['John Bonham'],
                        ['Dave Matthews'],
                        ['Alice Cooper']
                    ];

                    var random = Math.floor(Math.random() * featuredStudents.length);

                    var randomStudent = ['img/redCalif.jpg', 'img/redGetaway.jpg', 'img/redLive.jpg', 'img/redStadium.jpg'];

                    q1.innerHTML = "<img class='studentpic' src=" + randomStudent[random] + ">";

                }
                // turn on lightbox
             starter1();
            }

            // question two error handling
            if ($('#blues').val() !== 'bruce') {
                $('#blues').css('border', '3px solid red');
                $('#err2').remove();
                flag = true;
                $('#blues').after('<span id="err2"> Incorrect</span>');

           
            } else {
                $('#err2').remove();
                flag = true;
                displayQuestion2();
                function displayQuestion2() {

                    var featuredStudent = document.getElementById('question2');

                    var featuredStudents = [
                        ['Moody Blues'],
                        ['John Bonham'],
                        ['Dave Matthews'],
                        ['Alice Cooper']
                    ];

                    var random = Math.floor(Math.random() * featuredStudents.length);

                    var randomStudent = ['img/bluesAmerica.jpg', 'img/bluesDefinitive.jpg', 'img/bluesSoul.jpg', 'img/bluesSoundtrack.jpg'];

                    q2.innerHTML = "<img class='studentpic' src=" + randomStudent[random] + ">";
                }
                starter2();
            }

            // question three error handling
            if ($('#moody').val() !== 'festival') {
                $('#moody').css('border', '3px solid red');
                $('#err3').remove();
                flag = true;
                $('#moody').after('<span id="err2"> Incorrect</span>');

                errors.push(['moody', 'Incorrect']);
            } else {
                $('#err3').remove();
                // Switch to lightbox when question is correct Q3
                displayQuestion3();
                function displayQuestion3() {

                    var featuredStudent = document.getElementById('question3');

                    var featuredStudents = [
                        ['Moody Blues'],
                        ['John Bonham'],
                        ['Dave Matthews'],
                        ['Alice Cooper']
                    ];

                    var random = Math.floor(Math.random() * featuredStudents.length);

                    var randomStudent = ['img/moodyDays.jpg', 'img/moodyChord.jpg', 'img/moodyEvery.jpg', 'img/moodyBalance.jpg'];

                    q3.innerHTML = "<img class='studentpic' src=" + randomStudent[random] + ">";
                }
                starter3();
            }
            // question four error handling
            if ($('#green').val() !== 'idiot') {
                $('#green').css('border', '3px solid red');
                $('#err4').remove();
                flag = true;
                $('#green').after('<span id="err2"> Incorrect</span>');

             
            } else {
                $('#err4').remove();
                flag = true;
                displayQuestion4();
                function displayQuestion4() {

                    var featuredStudent = document.getElementById('question4');

                    var featuredStudents = [
                        ['Moody Blues'],
                        ['John Bonham'],
                        ['Dave Matthews'],
                        ['Alice Cooper']
                    ];

                    var random = Math.floor(Math.random() * featuredStudents.length);

                    var randomStudent = ['img/green21st.jpg', 'img/greenDookie.jpg', 'img/greenIdiot.jpg', 'img/greenNimrod.jpg'];

                    q4.innerHTML = "<button id = starter1<img class='studentpic' src=" + randomStudent[random] + ">";
                }
                starter4();
            }

            // error bucket and form submission prevent
            flag = true;
            if (flag) {
                // console.log (yes);
                var errorBucket = $('.errors');
                var output = '<ul>';
                for (let index = 0; index < errors.length; index++) {
                    output += '<li>' + errors[index][1] + '</li>';
                }
                output += '</ul>';
                errorBucket.html(output);
                // stops form from being submitted
                evt.preventDefault();
                // puts the currsor in first unfilled input
                $('#' + errors[0][0]).focus();
            }

        });
    });


    // stopper.addEventListener("click", function () {
    //     stopIntervals(featuredStudentTimer1);
    //     stopIntervals(featuredStudentTimer2);
    //     stopIntervals(featuredStudentTimer3);
    //     stopIntervals(featuredStudentTimer4);
    // });

    // This is the placeholder for the start of the lightbox functionality that will be called when user gets question right
    function starter1() {
        featuredStudentTimer1 = setInterval(displayQuestion1, 1000);

    };
    function starter2() {
        featuredStudentTimer2 = setInterval(displayQuestion2, 1000);

    };
     function starter3 () {
        featuredStudentTimer3 = setInterval(displayQuestion3, 1000);

    };
   function starter4() {
        featuredStudentTimer4 = setInterval(displayQuestion4, 1000);

    };



</script>
<script src="lightboxScript.js"></script>
</body>

</html>